{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ankit\\\\Desktop\\\\FUND\\\\funding\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Web3 from \"web3\";\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport { loadContract } from \"./utils/load-contract\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [web3Api, setWeb3Api] = useState({\n    provider: null,\n    web3: null,\n    contract: null\n  });\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [reload, shouldReload] = useState(false);\n  const reloadEffect = () => shouldReload(!reload);\n  const setAccountListener = provider => {\n    provider.on(\"accountsChanged\", accounts => setAccount(accounts[0]));\n  };\n  useEffect(() => {\n    const loadProvider = async () => {\n      const provider = await detectEthereumProvider();\n      const contract = await loadContract(\"Funder\", provider);\n      if (provider) {\n        setAccountListener(provider);\n        provider.request({\n          method: \"eth_requestAccounts\"\n        });\n        setWeb3Api({\n          web3: new Web3(provider),\n          provider,\n          contract\n        });\n      } else {\n        console.error(\"Please install MetaMask!\");\n      }\n      // if (window.ethereum) {\n      //   provider = window.ethereum;npm\n      //   try {\n      //     await provider.enable();\n      //   } catch {\n      //     console.error(\"User is not allowed\");\n      //   }\n      // } else if (window.web3) {\n      //   provider = window.web3.currentProvider;\n      // } else if (!process.env.production) {\n      //   provider = new Web3.providers.HttpProvider(\"http://localhost:7545\");\n      // }\n    };\n\n    loadProvider();\n  }, []);\n  useEffect(() => {\n    const loadBalance = async () => {\n      const {\n        contract,\n        web3\n      } = web3Api;\n      const balance = await web3.eth.getBalance(contract.address);\n      setBalance(web3.utils.fromWei(balance, \"ether\"));\n    };\n    web3Api.contract && loadBalance();\n  }, [web3Api, reload]);\n  const transferFund = async () => {\n    const {\n      web3,\n      contract\n    } = web3Api;\n    await contract.transfer({\n      from: account,\n      value: web3.utils.toWei(\"2\", \"ether\")\n    });\n    reloadEffect();\n  };\n  const withdrawFund = async () => {\n    const {\n      contract,\n      web3\n    } = web3Api;\n    const withdrawAmout = web3.utils.toWei(\"2\", \"ether\");\n    await contract.withdraw(withdrawAmout, {\n      from: account\n    });\n    reloadEffect();\n  };\n  useEffect(() => {\n    const getAccount = async () => {\n      const accounts = await web3Api.web3.eth.getAccounts();\n      setAccount(accounts[0]);\n    };\n    web3Api.web3 && getAccount();\n  }, [web3Api.web3]);\n\n  // console.log(web3Api.web3);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"card text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"card-header\",\n        children: \"Funding\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          class: \"card-title\",\n          children: [\"Balance: \", balance, \" ETH \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"card-text\",\n          children: [\"Account : \", account ? account : \"not connected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn btn-success \",\n          onClick: transferFund,\n          children: \"Transfer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn btn-primary \",\n          onClick: withdrawFund,\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"card-footer text-muted\",\n        children: \"FUNDING (ankit)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(App, \"Cl6NC6mv9LbV94vVt55qh4LUVcA=\");\n_c = App;\nexport default App;\n//npm install --save react-scripts@4.0.3\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Web3","detectEthereumProvider","loadContract","App","web3Api","setWeb3Api","provider","web3","contract","account","setAccount","balance","setBalance","reload","shouldReload","reloadEffect","setAccountListener","on","accounts","loadProvider","request","method","console","error","loadBalance","eth","getBalance","address","utils","fromWei","transferFund","transfer","from","value","toWei","withdrawFund","withdrawAmout","withdraw","getAccount","getAccounts"],"sources":["C:/Users/ankit/Desktop/FUND/funding/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Web3 from \"web3\";\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport { loadContract } from \"./utils/load-contract\";\n\nfunction App() {\n  const [web3Api, setWeb3Api] = useState({\n    provider: null,\n    web3: null,\n    contract: null,\n  });\n\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [reload, shouldReload] = useState(false);\n\n  const reloadEffect = () => shouldReload(!reload);\n  const setAccountListener = (provider) => {\n    provider.on(\"accountsChanged\", (accounts) => setAccount(accounts[0]));\n  };\n  useEffect(() => {\n    const loadProvider = async () => {\n      const provider = await detectEthereumProvider();\n      const contract = await loadContract(\"Funder\", provider);\n      if (provider) {\n        setAccountListener(provider);\n        provider.request({ method: \"eth_requestAccounts\" });\n        setWeb3Api({\n          web3: new Web3(provider),\n          provider,\n          contract,\n        });\n      } else {\n        console.error(\"Please install MetaMask!\", );\n      }\n      // if (window.ethereum) {\n      //   provider = window.ethereum;npm\n      //   try {\n      //     await provider.enable();\n      //   } catch {\n      //     console.error(\"User is not allowed\");\n      //   }\n      // } else if (window.web3) {\n      //   provider = window.web3.currentProvider;\n      // } else if (!process.env.production) {\n      //   provider = new Web3.providers.HttpProvider(\"http://localhost:7545\");\n      // }\n    };\n\n    loadProvider();\n  }, []);\n\n  useEffect(() => {\n    const loadBalance = async () => {\n      const { contract, web3 } = web3Api;\n      const balance = await web3.eth.getBalance(contract.address);\n      setBalance(web3.utils.fromWei(balance, \"ether\"));\n    };\n    web3Api.contract && loadBalance();\n  }, [web3Api, reload]);\n\n  const transferFund = async () => {\n    const { web3, contract } = web3Api;\n    await contract.transfer({\n      from: account,\n      value: web3.utils.toWei(\"2\", \"ether\"),\n    });\n    reloadEffect();\n  };\n\n  const withdrawFund = async () => {\n    const { contract, web3 } = web3Api;\n    const withdrawAmout = web3.utils.toWei(\"2\", \"ether\");\n    await contract.withdraw(withdrawAmout, {\n      from: account,\n    });\n    reloadEffect();\n  };\n\n  useEffect(() => {\n    const getAccount = async () => {\n      const accounts = await web3Api.web3.eth.getAccounts();\n      setAccount(accounts[0]);\n    };\n    web3Api.web3 && getAccount();\n  }, [web3Api.web3]);\n\n  // console.log(web3Api.web3);\n  return (\n    <>\n      <div class=\"card text-center\">\n        <div class=\"card-header\">Funding</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Balance: {balance} ETH </h5>\n          <p class=\"card-text\">\n            Account : {account ? account : \"not connected\"}\n          </p>\n          {/* <button\n            type=\"button\"\n            class=\"btn btn-success\"\n            onClick={async () => {\n              const accounts = await window.ethereum.request({\n                method: \"eth_requestAccounts\",\n              });\n              console.log(accounts);\n            }}\n          >\n            Connect to metamask\n          </button> */}\n          &nbsp;\n          <button type=\"button\" class=\"btn btn-success \" onClick={transferFund}>\n            Transfer\n          </button>\n          &nbsp;\n          <button type=\"button\" class=\"btn btn-primary \" onClick={withdrawFund}>\n            Withdraw\n          </button>\n        </div>\n        <div class=\"card-footer text-muted\">FUNDING (ankit)</div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n//npm install --save react-scripts@4.0.3"],"mappings":"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"},"metadata":{},"sourceType":"module"}